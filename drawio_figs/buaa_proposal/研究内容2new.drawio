<mxfile host="app.diagrams.net" modified="2025-06-27T07:20:01.000Z" agent="5.0" etag="abc123" version="24.4.8" type="device">
  <diagram name="Intelligent LLM Load Balancer" id="intelligent-llm-load-balancer">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Background sections -->
        <mxCell id="bg-user" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1f5fe;strokeColor=none;opacity=30;" vertex="1" parent="1">
          <mxGeometry x="50" y="100" width="200" height="600" as="geometry" />
        </mxCell>
        <mxCell id="bg-scheduler" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff3e0;strokeColor=none;opacity=30;" vertex="1" parent="1">
          <mxGeometry x="300" y="100" width="300" height="600" as="geometry" />
        </mxCell>
        <mxCell id="bg-instances" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f3e5f5;strokeColor=none;opacity=30;" vertex="1" parent="1">
          <mxGeometry x="650" y="100" width="450" height="600" as="geometry" />
        </mxCell>
        
        <!-- Title -->
        <mxCell id="title" value="智能 LLM 请求分发：非均匀调度 Dynamic Load Balancing for LLM Inference" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;fontColor=#1976d2;" vertex="1" parent="1">
          <mxGeometry x="200" y="30" width="700" height="40" as="geometry" />
        </mxCell>
        
        <!-- User Requests Section -->
        <mxCell id="user-title" value="User Requests" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#0277bd;" vertex="1" parent="1">
          <mxGeometry x="100" y="120" width="100" height="30" as="geometry" />
        </mxCell>
        
        <!-- User Request Icons -->
        <mxCell id="req1" value="💬" style="rounded=1;whiteSpace=wrap;html=1;fontSize=24;fillColor=#4fc3f7;strokeColor=#0277bd;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="80" y="170" width="50" height="40" as="geometry" />
        </mxCell>
        <mxCell id="req1-label" value="Chat" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="75" y="215" width="60" height="15" as="geometry" />
        </mxCell>
        
        <mxCell id="req2" value="📄" style="rounded=1;whiteSpace=wrap;html=1;fontSize=24;fillColor=#81c784;strokeColor=#388e3c;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="160" y="170" width="50" height="40" as="geometry" />
        </mxCell>
        <mxCell id="req2-label" value="Document" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="155" y="215" width="60" height="15" as="geometry" />
        </mxCell>
        
        <mxCell id="req3" value="💻" style="rounded=1;whiteSpace=wrap;html=1;fontSize=24;fillColor=#ffb74d;strokeColor=#f57c00;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="80" y="280" width="50" height="40" as="geometry" />
        </mxCell>
        <mxCell id="req3-label" value="Code" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="75" y="325" width="60" height="15" as="geometry" />
        </mxCell>
        
        <mxCell id="req4" value="❓" style="rounded=1;whiteSpace=wrap;html=1;fontSize=24;fillColor=#ba68c8;strokeColor=#7b1fa2;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="160" y="280" width="50" height="40" as="geometry" />
        </mxCell>
        <mxCell id="req4-label" value="Q&A" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="155" y="325" width="60" height="15" as="geometry" />
        </mxCell>
        
        <mxCell id="req5" value="🔍" style="rounded=1;whiteSpace=wrap;html=1;fontSize=24;fillColor=#f06292;strokeColor=#c2185b;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="80" y="390" width="50" height="40" as="geometry" />
        </mxCell>
        <mxCell id="req5-label" value="Search" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="75" y="435" width="60" height="15" as="geometry" />
        </mxCell>
        
        <mxCell id="req6" value="📊" style="rounded=1;whiteSpace=wrap;html=1;fontSize=24;fillColor=#a1887f;strokeColor=#5d4037;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="160" y="390" width="50" height="40" as="geometry" />
        </mxCell>
        <mxCell id="req6-label" value="Analysis" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="155" y="435" width="60" height="15" as="geometry" />
        </mxCell>
        
        <mxCell id="req7" value="✍️" style="rounded=1;whiteSpace=wrap;html=1;fontSize=24;fillColor=#90a4ae;strokeColor=#455a64;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="120" y="500" width="50" height="40" as="geometry" />
        </mxCell>
        <mxCell id="req7-label" value="Writing" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="115" y="545" width="60" height="15" as="geometry" />
        </mxCell>
        
        <!-- Intelligent Scheduler -->
        <mxCell id="scheduler-title" value="Intelligent Scheduler" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#f57c00;" vertex="1" parent="1">
          <mxGeometry x="375" y="120" width="150" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="scheduler-main" value="🧠" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fontSize=48;fillColor=#fff3e0;strokeColor=#f57c00;strokeWidth=3;fontColor=#bf360c;" vertex="1" parent="1">
          <mxGeometry x="375" y="250" width="150" height="150" as="geometry" />
        </mxCell>
        
        <!-- Scheduler decision factors -->
        <mxCell id="factor1" value="📊 Instance Load" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#e8f5e8;strokeColor=#4caf50;fontColor=#2e7d32;" vertex="1" parent="1">
          <mxGeometry x="320" y="170" width="80" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="factor2" value="⚡ Capability" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#e3f2fd;strokeColor=#2196f3;fontColor=#1565c0;" vertex="1" parent="1">
          <mxGeometry x="420" y="170" width="80" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="factor3" value="🎯 Request Type" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#fff3e0;strokeColor=#ff9800;fontColor=#e65100;" vertex="1" parent="1">
          <mxGeometry x="520" y="170" width="80" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="factor4" value="⏱️ Latency" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#fce4ec;strokeColor=#e91e63;fontColor=#ad1457;" vertex="1" parent="1">
          <mxGeometry x="320" y="420" width="80" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="factor5" value="💰 Cost" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#f3e5f5;strokeColor=#9c27b0;fontColor=#6a1b9a;" vertex="1" parent="1">
          <mxGeometry x="520" y="420" width="80" height="25" as="geometry" />
        </mxCell>
        
        <!-- LLM Instances -->
        <mxCell id="instances-title" value="LLM Instances" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#7b1fa2;" vertex="1" parent="1">
          <mxGeometry x="825" y="120" width="120" height="30" as="geometry" />
        </mxCell>
        
        <!-- Large Instance (Low Load) -->
        <mxCell id="instance1" value="🖥️" style="rounded=1;whiteSpace=wrap;html=1;fontSize=36;fillColor=#c8e6c9;strokeColor=#4caf50;strokeWidth=3;fontColor=#2e7d32;" vertex="1" parent="1">
          <mxGeometry x="720" y="180" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="instance1-label" value="Instance 1&#xa;Large Model&#xa;Low Load (15%)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#2e7d32;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="720" y="265" width="120" height="35" as="geometry" />
        </mxCell>
        
        <!-- Medium Instance (Medium Load) -->
        <mxCell id="instance2" value="💻" style="rounded=1;whiteSpace=wrap;html=1;fontSize=24;fillColor=#fff3e0;strokeColor=#ff9800;strokeWidth=3;fontColor=#e65100;" vertex="1" parent="1">
          <mxGeometry x="900" y="200" width="80" height="60" as="geometry" />
        </mxCell>
        <mxCell id="instance2-label" value="Instance 2&#xa;Medium Model&#xa;Medium Load (65%)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#e65100;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="885" y="265" width="110" height="35" as="geometry" />
        </mxCell>
        
        <!-- Small Instance (High Load) -->
        <mxCell id="instance3" value="📱" style="rounded=1;whiteSpace=wrap;html=1;fontSize=18;fillColor=#ffcdd2;strokeColor=#f44336;strokeWidth=3;fontColor=#c62828;" vertex="1" parent="1">
          <mxGeometry x="750" y="360" width="60" height="40" as="geometry" />
        </mxCell>
        <mxCell id="instance3-label" value="Instance 3&#xa;Small Model&#xa;High Load (90%)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#c62828;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="720" y="405" width="120" height="35" as="geometry" />
        </mxCell>
        
        <!-- Medium Instance (Low Load) -->
        <mxCell id="instance4" value="🖨️" style="rounded=1;whiteSpace=wrap;html=1;fontSize=20;fillColor=#c8e6c9;strokeColor=#4caf50;strokeWidth=3;fontColor=#2e7d32;" vertex="1" parent="1">
          <mxGeometry x="900" y="360" width="70" height="50" as="geometry" />
        </mxCell>
        <mxCell id="instance4-label" value="Instance 4&#xa;Medium Model&#xa;Low Load (25%)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#2e7d32;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="870" y="415" width="130" height="35" as="geometry" />
        </mxCell>
        
        <!-- Large Instance (Cold Start) -->
        <mxCell id="instance5" value="🏭" style="rounded=1;whiteSpace=wrap;html=1;fontSize=32;fillColor=#e3f2fd;strokeColor=#2196f3;strokeWidth=3;fontColor=#0d47a1;strokeOpacity=60;fillOpacity=60;" vertex="1" parent="1">
          <mxGeometry x="750" y="500" width="100" height="70" as="geometry" />
        </mxCell>
        <mxCell id="instance5-label" value="Instance 5&#xa;Large Model&#xa;Cold Start" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#0d47a1;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="730" y="575" width="140" height="35" as="geometry" />
        </mxCell>
        
        <!-- Request flow arrows (User -> Scheduler) -->
        <mxCell id="arrow-to-scheduler" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=8;strokeColor=#1976d2;endArrow=block;endFill=1;endSize=12;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxSource x="250" />
            <mxTarget x="375" />
            <mxPoint x="250" y="325" as="sourcePoint" />
            <mxPoint x="375" y="325" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Distribution arrows (Scheduler -> Instances) with varying thickness -->
        <!-- Very thick arrow to Instance 1 (Large, Low Load) -->
        <mxCell id="arrow-to-inst1" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=16;strokeColor=#4caf50;endArrow=block;endFill=1;endSize=16;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxSource x="525" />
            <mxTarget x="720" />
            <mxPoint x="525" y="300" as="sourcePoint" />
            <mxPoint x="720" y="220" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow-to-inst1-label" value="Heavy Traffic" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#2e7d32;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="585" y="225" width="80" height="20" as="geometry" />
        </mxCell>
        
        <!-- Medium arrow to Instance 2 (Medium, Medium Load) -->
        <mxCell id="arrow-to-inst2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=8;strokeColor=#ff9800;endArrow=block;endFill=1;endSize=12;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxSource x="525" />
            <mxTarget x="900" />
            <mxPoint x="525" y="320" as="sourcePoint" />
            <mxPoint x="900" y="230" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow-to-inst2-label" value="Medium Traffic" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#e65100;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="680" y="270" width="80" height="20" as="geometry" />
        </mxCell>
        
        <!-- Very thin arrow to Instance 3 (Small, High Load) -->
        <mxCell id="arrow-to-inst3" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#f44336;endArrow=block;endFill=1;endSize=8;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxSource x="525" />
            <mxTarget x="750" />
            <mxPoint x="525" y="350" as="sourcePoint" />
            <mxPoint x="750" y="380" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow-to-inst3-label" value="Light Traffic" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#c62828;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="600" y="370" width="80" height="20" as="geometry" />
        </mxCell>
        
        <!-- Medium-thick arrow to Instance 4 (Medium, Low Load) -->
        <mxCell id="arrow-to-inst4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=10;strokeColor=#4caf50;endArrow=block;endFill=1;endSize=14;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxSource x="525" />
            <mxTarget x="900" />
            <mxPoint x="525" y="370" as="sourcePoint" />
            <mxPoint x="900" y="385" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow-to-inst4-label" value="Good Traffic" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#2e7d32;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="680" y="400" width="80" height="20" as="geometry" />
        </mxCell>
        
        <!-- No arrow to Instance 5 (Cold Start) with dashed line indication -->
        <mxCell id="arrow-to-inst5" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#2196f3;endArrow=none;endFill=0;dashed=1;dashPattern=5 5;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxSource x="525" />
            <mxTarget x="750" />
            <mxPoint x="525" y="390" as="sourcePoint" />
            <mxPoint x="750" y="535" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="arrow-to-inst5-label" value="Warming Up" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#0d47a1;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="600" y="480" width="80" height="20" as="geometry" />
        </mxCell>
        
        <!-- Legend -->
        <mxCell id="legend-bg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fafafa;strokeColor=#bdbdbd;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="730" width="1050" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-title" value="图例 Legend" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#424242;" vertex="1" parent="1">
          <mxGeometry x="70" y="740" width="100" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-colors" value="实例颜色 Instance Colors:" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#424242;" vertex="1" parent="1">
          <mxGeometry x="70" y="765" width="150" height="15" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-green" value="🟢 低负载 Low Load" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#2e7d32;" vertex="1" parent="1">
          <mxGeometry x="70" y="780" width="120" height="15" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-yellow" value="🟡 中等负载 Medium Load" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#e65100;" vertex="1" parent="1">
          <mxGeometry x="200" y="780" width="150" height="15" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-red" value="🔴 高负载 High Load" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#c62828;" vertex="1" parent="1">
          <mxGeometry x="360" y="780" width="130" height="15" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-blue" value="🔵 冷启动 Cold Start" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#0d47a1;" vertex="1" parent="1">
          <mxGeometry x="500" y="780" width="130" height="15" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-arrows" value="箭头粗细 Arrow Thickness: 请求流量 Request Traffic Volume" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#424242;" vertex="1" parent="1">
          <mxGeometry x="650" y="765" width="300" height="15" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-size" value="实例大小 Instance Size: 计算能力 Computing Capability" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#424242;" vertex="1" parent="1">
          <mxGeometry x="650" y="780" width="280" height="15" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
