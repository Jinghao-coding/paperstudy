<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net" modified="2025-06-27T07:26:29.000Z" agent="5.0" version="24.4.8" etag="abc123" type="device">
  <diagram name="Intelligent LLM Load Balancer" id="intelligent-llm-load-balancer">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1200" pageHeight="850" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Background sections -->
        <mxCell id="bg-user" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1f5fe;strokeColor=none;opacity=30;" vertex="1" parent="1">
          <mxGeometry x="50" y="100" width="200" height="600" as="geometry" />
        </mxCell>
        <mxCell id="bg-scheduler" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff3e0;strokeColor=none;opacity=30;" vertex="1" parent="1">
          <mxGeometry x="300" y="100" width="300" height="600" as="geometry" />
        </mxCell>
        <mxCell id="bg-instances" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f3e5f5;strokeColor=none;opacity=30;" vertex="1" parent="1">
          <mxGeometry x="650" y="100" width="500" height="600" as="geometry" />
        </mxCell>
        
        <!-- Title -->
        <mxCell id="title" value="智能 LLM 请求分发：非均匀调度&#xa;Dynamic Load Balancing for LLM Inference" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1;fontColor=#1976d2;" vertex="1" parent="1">
          <mxGeometry x="200" y="30" width="700" height="50" as="geometry" />
        </mxCell>
        
        <!-- User Requests Section Title -->
        <mxCell id="user-title" value="User Requests" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#0277bd;" vertex="1" parent="1">
          <mxGeometry x="100" y="120" width="100" height="30" as="geometry" />
        </mxCell>
        
        <!-- User Request 1: Chat -->
        <mxCell id="req1" value="Chat" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;fillColor=#4fc3f7;strokeColor=#0277bd;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="80" y="170" width="50" height="40" as="geometry" />
        </mxCell>
        
        <!-- User Request 2: Document -->
        <mxCell id="req2" value="Doc" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;fillColor=#81c784;strokeColor=#388e3c;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="160" y="170" width="50" height="40" as="geometry" />
        </mxCell>
        
        <!-- User Request 3: Code -->
        <mxCell id="req3" value="Code" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;fillColor=#ffb74d;strokeColor=#f57c00;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="80" y="240" width="50" height="40" as="geometry" />
        </mxCell>
        
        <!-- User Request 4: Q&A -->
        <mxCell id="req4" value="Q&amp;A" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;fillColor=#ba68c8;strokeColor=#7b1fa2;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="160" y="240" width="50" height="40" as="geometry" />
        </mxCell>
        
        <!-- User Request 5: Search -->
        <mxCell id="req5" value="Search" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#f06292;strokeColor=#c2185b;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="80" y="310" width="50" height="40" as="geometry" />
        </mxCell>
        
        <!-- User Request 6: Analysis -->
        <mxCell id="req6" value="Analysis" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fillColor=#a1887f;strokeColor=#5d4037;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="160" y="310" width="50" height="40" as="geometry" />
        </mxCell>
        
        <!-- User Request 7: Writing -->
        <mxCell id="req7" value="Writing" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#90a4ae;strokeColor=#455a64;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="120" y="380" width="50" height="40" as="geometry" />
        </mxCell>
        
        <!-- Intelligent Scheduler Title -->
        <mxCell id="scheduler-title" value="Intelligent Scheduler" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#f57c00;" vertex="1" parent="1">
          <mxGeometry x="375" y="120" width="150" height="30" as="geometry" />
        </mxCell>
        
        <!-- Main Scheduler Brain -->
        <mxCell id="scheduler-main" value="BRAIN" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fontSize=16;fillColor=#fff3e0;strokeColor=#f57c00;strokeWidth=3;fontColor=#bf360c;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="375" y="250" width="150" height="150" as="geometry" />
        </mxCell>
        
        <!-- Decision Factor 1: Load -->
        <mxCell id="factor1" value="Instance Load" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#e8f5e8;strokeColor=#4caf50;fontColor=#2e7d32;" vertex="1" parent="1">
          <mxGeometry x="320" y="170" width="80" height="25" as="geometry" />
        </mxCell>
        
        <!-- Decision Factor 2: Capability -->
        <mxCell id="factor2" value="Capability" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#e3f2fd;strokeColor=#2196f3;fontColor=#1565c0;" vertex="1" parent="1">
          <mxGeometry x="420" y="170" width="80" height="25" as="geometry" />
        </mxCell>
        
        <!-- Decision Factor 3: Request Type -->
        <mxCell id="factor3" value="Request Type" style="rounded=1;whiteSpace=wrap;html=1;fontSize=9;fillColor=#fff3e0;strokeColor=#ff9800;fontColor=#e65100;" vertex="1" parent="1">
          <mxGeometry x="520" y="170" width="80" height="25" as="geometry" />
        </mxCell>
        
        <!-- Decision Factor 4: Latency -->
        <mxCell id="factor4" value="Latency" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#fce4ec;strokeColor=#e91e63;fontColor=#ad1457;" vertex="1" parent="1">
          <mxGeometry x="320" y="420" width="80" height="25" as="geometry" />
        </mxCell>
        
        <!-- Decision Factor 5: Cost -->
        <mxCell id="factor5" value="Cost" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#f3e5f5;strokeColor=#9c27b0;fontColor=#6a1b9a;" vertex="1" parent="1">
          <mxGeometry x="520" y="420" width="80" height="25" as="geometry" />
        </mxCell>
        
        <!-- LLM Instances Title -->
        <mxCell id="instances-title" value="LLM Instances" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;fontColor=#7b1fa2;" vertex="1" parent="1">
          <mxGeometry x="825" y="120" width="120" height="30" as="geometry" />
        </mxCell>
        
        <!-- Instance 1: Large, Low Load -->
        <mxCell id="instance1" value="Instance 1&#xa;LARGE&#xa;Low Load (15%)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;fillColor=#c8e6c9;strokeColor=#4caf50;strokeWidth=3;fontColor=#2e7d32;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="720" y="180" width="120" height="80" as="geometry" />
        </mxCell>
        
        <!-- Instance 2: Medium, Medium Load -->
        <mxCell id="instance2" value="Instance 2&#xa;MEDIUM&#xa;Med Load (65%)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=11;fillColor=#fff3e0;strokeColor=#ff9800;strokeWidth=3;fontColor=#e65100;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="900" y="200" width="90" height="60" as="geometry" />
        </mxCell>
        
        <!-- Instance 3: Small, High Load -->
        <mxCell id="instance3" value="Instance 3&#xa;SMALL&#xa;High (90%)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#ffcdd2;strokeColor=#f44336;strokeWidth=3;fontColor=#c62828;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="750" y="320" width="70" height="50" as="geometry" />
        </mxCell>
        
        <!-- Instance 4: Medium, Low Load -->
        <mxCell id="instance4" value="Instance 4&#xa;MEDIUM&#xa;Low Load (25%)" style="rounded=1;whiteSpace=wrap;html=1;fontSize=10;fillColor=#c8e6c9;strokeColor=#4caf50;strokeWidth=3;fontColor=#2e7d32;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="900" y="320" width="90" height="60" as="geometry" />
        </mxCell>
        
        <!-- Instance 5: Large, Cold Start -->
        <mxCell id="instance5" value="Instance 5&#xa;LARGE&#xa;Cold Start" style="rounded=1;whiteSpace=wrap;html=1;fontSize=11;fillColor=#e3f2fd;strokeColor=#2196f3;strokeWidth=3;fontColor=#0d47a1;fontStyle=1;opacity=70;" vertex="1" parent="1">
          <mxGeometry x="760" y="420" width="110" height="70" as="geometry" />
        </mxCell>
        
        <!-- Arrows from User Requests to Scheduler -->
        <mxCell id="arrow-to-scheduler" value="" style="endArrow=block;html=1;rounded=0;strokeWidth=8;strokeColor=#1976d2;endSize=12;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="250" y="300" as="sourcePoint" />
            <mxPoint x="370" y="325" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Arrow 1: Very thick to Instance 1 (Heavy Traffic) -->
        <mxCell id="arrow-to-inst1" value="" style="endArrow=block;html=1;rounded=0;strokeWidth=16;strokeColor=#4caf50;endSize=16;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="525" y="300" as="sourcePoint" />
            <mxPoint x="720" y="220" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="traffic-label-1" value="Heavy Traffic" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#2e7d32;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="585" y="225" width="80" height="20" as="geometry" />
        </mxCell>
        
        <!-- Arrow 2: Medium to Instance 2 -->
        <mxCell id="arrow-to-inst2" value="" style="endArrow=block;html=1;rounded=0;strokeWidth=8;strokeColor=#ff9800;endSize=12;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="525" y="310" as="sourcePoint" />
            <mxPoint x="900" y="230" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="traffic-label-2" value="Medium Traffic" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#e65100;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="680" y="270" width="80" height="20" as="geometry" />
        </mxCell>
        
        <!-- Arrow 3: Very thin to Instance 3 (Light Traffic) -->
        <mxCell id="arrow-to-inst3" value="" style="endArrow=block;html=1;rounded=0;strokeWidth=2;strokeColor=#f44336;endSize=8;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="525" y="350" as="sourcePoint" />
            <mxPoint x="750" y="345" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="traffic-label-3" value="Light Traffic" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#c62828;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="600" y="360" width="80" height="20" as="geometry" />
        </mxCell>
        
        <!-- Arrow 4: Medium-thick to Instance 4 -->
        <mxCell id="arrow-to-inst4" value="" style="endArrow=block;html=1;rounded=0;strokeWidth=10;strokeColor=#4caf50;endSize=14;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="525" y="370" as="sourcePoint" />
            <mxPoint x="900" y="350" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="traffic-label-4" value="Good Traffic" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#2e7d32;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="680" y="385" width="80" height="20" as="geometry" />
        </mxCell>
        
        <!-- Arrow 5: Dashed line to Instance 5 (Warming up) -->
        <mxCell id="arrow-to-inst5" value="" style="endArrow=none;html=1;rounded=0;strokeWidth=2;strokeColor=#2196f3;dashed=1;dashPattern=5 5;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="525" y="390" as="sourcePoint" />
            <mxPoint x="760" y="455" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="traffic-label-5" value="Warming Up" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#0d47a1;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="600" y="440" width="80" height="20" as="geometry" />
        </mxCell>
        
        <!-- Legend Background -->
        <mxCell id="legend-bg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fafafa;strokeColor=#bdbdbd;strokeWidth=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="730" width="1100" height="100" as="geometry" />
        </mxCell>
        
        <!-- Legend Title -->
        <mxCell id="legend-title" value="图例 Legend" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontStyle=1;fontColor=#424242;" vertex="1" parent="1">
          <mxGeometry x="70" y="740" width="100" height="20" as="geometry" />
        </mxCell>
        
        <!-- Legend: Instance Colors -->
        <mxCell id="legend-colors-title" value="实例颜色 Instance Colors:" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#424242;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="70" y="765" width="150" height="15" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-green" value="绿色=低负载 Green=Low Load" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#2e7d32;" vertex="1" parent="1">
          <mxGeometry x="70" y="785" width="150" height="15" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-yellow" value="橙色=中等负载 Orange=Medium Load" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#e65100;" vertex="1" parent="1">
          <mxGeometry x="70" y="800" width="180" height="15" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-red" value="红色=高负载 Red=High Load" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#c62828;" vertex="1" parent="1">
          <mxGeometry x="260" y="785" width="150" height="15" as="geometry" />
        </mxCell>
        
        <mxCell id="legend-blue" value="蓝色=冷启动 Blue=Cold Start" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=9;fontColor=#0d47a1;" vertex="1" parent="1">
          <mxGeometry x="260" y="800" width="150" height="15" as="geometry" />
        </mxCell>
        
        <!-- Legend: Arrow Thickness -->
        <mxCell id="legend-arrows" value="箭头粗细=请求流量 Arrow Thickness=Request Traffic" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#424242;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="450" y="765" width="250" height="15" as="geometry" />
        </mxCell>
        
        <!-- Legend: Instance Size -->
        <mxCell id="legend-size" value="实例大小=计算能力 Instance Size=Computing Capability" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#424242;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="450" y="785" width="280" height="15" as="geometry" />
        </mxCell>
        
        <!-- Legend: Smart Distribution -->
        <mxCell id="legend-smart" value="智能分发：避免高负载实例，优先低负载大容量实例" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontColor=#1976d2;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="450" y="805" width="350" height="15" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
